
---
title: 后端工程师入门前端页面重构（二）：心法 I
date: 2018/01/05
categories: 前端页面重构系列
tags:
- 前端
---

上一篇博客是我们《后端工程师入门前端页面重构》系列的第一篇，我们介绍了页面布局的口诀：

**从左到右，从上到下，化整为零。**

那么在接下来的几篇文章中，我们就来聊聊页面布局的「心法」和一些具体的「招式」。

那么什么是心法呢？

<!-- more -->

如果说口诀是页面布局的原则，那么心法就是对页面布局中一些重要概念的认识。

在上一篇文章，我们一直推荐使用高效的浮动布局，类似大家都玩过的磁铁，在磁铁的周围，所有的铁块会被磁铁所吸引。

那么浮动就好比页面上的一块磁铁，它会吸引页面上的元素块，让它们朝一个方向进行组合、包含、交叠，进而完成整个页面的布局。

下面就让我们来看看页面中元素有什么类型。

## HTML 块状元素和行内元素

在我们熟知的页面布局中，网页的标题，logo等都是有高度和宽度的。我们来看下面的豆瓣首页的切图：

![豆瓣首页切图](/image/back-2-font-xinfa-1/douban-index.png)

在上面的图片中，我们使用红色的线条和文字标注豆瓣 logo 的高度和宽度。不仅仅是 logo 图有高度和宽度，搜索框，热搜主题等其它元素，几乎都有高度和宽度。

那么在 HTML 语言中，我们如何指定元素的高度和宽度呢？

我们先来写一段 HTML：

```html
<div>这是 div 标签里面的内容</div>
<span>这是 span 标签的内容</span>
```

然后给它们定义样式：

```css
div {
  background-color: red;
  height: 100px;
  width: 100px;
}
span {
  background-color: green;
  height: 100px;
  width: 100px;
```

效果如下：

![效果图](/image/back-2-font-xinfa-1/html-css-show.png)

发现一个问题：

**我们设置的高度和宽度只对 div 标签产生效果，对 span 标签没有产生效果。这是为什么呢？**


其实在 HTML 中，我们可以把标签分为「块状元素」和「行内元素」，上面代码中的 div 标签就是块状元素，而 span 标签就是行内元素。

那么这两类元素有什么区别呢？

从我们的代码的效果图里面我们已经看出来一个区别了：**块状元素可以设置它的高度和宽度，行内元素对的高度和宽度的设置是无效。**

我们把上面元素的宽度和高度都删除，让 div 标签和 span 标签保持原始的高度和宽度来看看效果。

![效果图](/image/back-2-font-xinfa-1/block-inline-elemet.png)

是不是又看出来一个区别呢？

**块状元素是独占一行的，而行内元素只占本身内容的大小。**

看看我们之前设置高度和宽度的例子，我们用浏览器检查一下看看。

![效果图](/image/back-2-font-xinfa-1/block-element.jpg)

**即使我们设置了块状元素的高度和宽度，它还是独占一行的**。真的是霸道啊！

然而，现实中的网页（如豆瓣），很多内容块都是拼接的，如果我们使用块状元素来表示这些内容块，如果消除它独占一行的情况呢？


关于这个问题，似乎有两种解决方案。


### inline-block

其实在 css 的 diplay 属性中，有一个属性值 `inline-block` 可以将标签呈现出「块状元素」和「行内元素」之间的中间态，即它可以拥有宽高度的同时，也可以具备行内元素的占位属性。

```html
<div>123</div>
<div>123</div>
```

然后给它们定义样式：

```css
div{
    background-color: red;
    display: inline-block;
}
```

看效果：
![行内元素误差效果显示](/image/back-2-font-xinfa-1/inline-element-error.png)

我们发现**虽然两个 div 可以变成行内元素在一行显示，但是它们之间还是存在空白，不能完美的相邻在一起。这点空白会让我们的布局很不美观！**

### 浮动
上面我们说了，浮动可以把页面上的元素往某一个方向吸引，那么如何吸引呢？
在 CSS 中，我们可以通过 `float:left` 把元素往左边吸引

```html
<div style="background-color: red">这是第一个区块</div>
<div style="background-color: green">这是第二个区块</div>
```

使用浮动：

```css
div{
    width: 200px;
    height: 200px;
    float: left;
}
```
看效果：

![简单浮动效果图](/image/back-2-font-xinfa-1/float-layout-show-1.png)

我们发现，通过浮动，可以使两个原本很难相邻在一起的块状元素，**完美** 的相邻在一起。

使用 `left` 是把元素往左边吸引，而 `right` 是把元素往右边吸引。


## 清除浮动

上面我们已经介绍了浮动的基本用法，那么在实际的开发过程中，我们可能有这样的需要：我们有三个元素块状元素，前两个块状元素需要使用浮动进行相邻，在上一行；第三个元素不使用浮动，让他保持块状元素的特征在下一行。

```html
<div class="float-div" style="background-color: red"> 第一个浮动元素块 </div>
<div class="float-div" style="background-color: green"> 第二个浮动元素块 </div>
<div class="nofloat-div"  style="background-color: yellow"> 非浮动元素块 </div>
```

定义样式：

```css
.float-div{
		width: 100px;
    height: 100px;
    float: left;
}
.nofloat-div{
    width: 100px;
    height: 100px;
}
```

看效果：
![](/image/back-2-font-xinfa-1/float-problem.png)

我去，我们的非浮动元素块去哪了？为什么只剩下文字了？ 这和我们预想的情况不一样啊！我们使用浏览器检查一下，发现，非浮动元素竟然跑到上面去了。

![](/image/back-2-font-xinfa-1/float-problem-nofloat.png)

这个不符合我们的需求啊！那么怎样解决这个问题呢？

要解决这个问题，就要使用 **清除浮动**

我们在非浮动元素的样式里面添加一行 `clear:left`，即可实现清除浮动，让我们来看效果：

![](/image/back-2-font-xinfa-1/clear-left.png)

真的把非浮动元素给压下来了！而且完美发符合我们的设计需求！

我们来分析「 clear: left; 」这段代码：

它用到的关键字是「 clear 」，它的含义是清除。

而 「 left 」 代表是左边。

那么它合起来的意思是：清除左边的浮动元素。

说到更明白一点就是：不让当前元素的左边有浮动元素（也可以理解为让浮动元素持有站位空间）。于是就把非浮动元素压到下一行来咯。

让我们再来拓展一下，clear 除了可以设置为 left，还可以设置为 「 right 」 和 「 both 」。

我相信不用我说你们也明白了吧！

right 就是不让当前元素 **右边** 存在浮动元素嘛。

那 both 就是不让当前元素的 **两边** 出现浮动元素喽。

到这里，我们介绍完了浮动布局和清除浮动的概念和基本用法，那它们在页面布局中是如何被使用的呢？
## 浮动布局--最佳实践
我们在心法篇中提到页面从上到下都是有层级的，那么我们如何进行明确的分层呢？

如豆瓣的首页，有着明显是上下分层。在每一层中，我们都需要使用 **浮动布局** 来使我们的元素紧密的交叠在一起，但是在每一行的最后，我们需要使用 **清除浮动** 来让浮动元素保持站位空间。

![](/image/back-2-font-xinfa-1/line.png)

因此我们需要在每一行的末尾加一个空的 div 标签，并在设置它为清除浮动。

在 CSS 中，我们可以使用 「after 选择器」 来实现添加元素，具体的用法可以参考:[W3C after 选择器](http://www.w3school.com.cn/cssref/selector_after.asp)

下面直接给出代码： 

```css
xxxdiv:after{
  	content: "";
  	clear: both;
  	display: block;
}
```        

## 心法小结
最后，我们再来回顾一下文章介绍的一些心法：

**1. HTML 分为块状元素和行内元素的，块状元素是独占一行的**

**2. 浮动布局是解决多个块状元素在同一行的最佳方法**

**3. 清除浮动是解决页面上下分层的一个重要方式**

**4. 浮动 + 清除浮动是页面布局的一个最佳实践**

文章中的一些招式可能说的太粗糙，先不用捉急，我们先学心法，招式到后面再专门的学习。

我会在下一篇博文继续介绍心法 II。

