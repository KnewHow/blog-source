---
title: 毕业论文
date: 2018/05/21
categories: 毕业论文
tags:
- 毕业论文
---

# 摘要
在互联网飞速发展的当下，编写一款软件已经不再是一个人或者一个公司的事情了，需要人与人之间的分工合作甚至是公司和公司之间的分工合作。因此API文档(接口文档)的地位显得越来越重要。在调研了网上大多数的文档生成工具以后，发现它们都有一个共同的缺点：工程师写完代码后，还需要手动的去维护文档。这不仅仅会增加软件的维护成本，同时也会增软件产生 bug 的风险。本工具尝试使用元编程的技术来解决这个问题。

本工具会制定一系列的接口编写规则，当工程师按照规则把接口代码编写完成时，工具将会在编译时期使用元编程技术来抽取数据，然后自动进行整理、分类最终生成 API 文档，不需要工程师手动的去维护 API 文档。

文章将按照如下的方式进行组织：第二章将会做需求分析和可行性分析，第三章将会介绍本工具的设计思路和用到的技术，第四章将会具体介绍各个模块的实现细节，第五章将会介绍在开发过程中的一些测试样例和最终的效果图展示。
# 1. 绪论
## 1.1 国内状况
在国内，API 文档的使用率非常频繁，在前后端协同开发以及调用别的公司的 API 接口，都需要接口文档来提供开发指导。最近很火的微信小程序开发也是要按照微信官方 API 文档开发的。但是国内好的 API 文档生成工具却寥寥无几。阿里巴巴有一个 API 生成工具的开源项目名为 [RAP](http://rapapi.org/org/index.do)，但是它还是需要工程师写完代码后手动的去维护 API 文档，这依然会产生维护成本和软件bug。
## 1.2 国外状况
在国外，有一个名为 [APIDOC](http://apidocjs.com/#example-basic) 的文档生成工具，它是通过在 API 接口代码中使用注释来标注 API 文档信息，但是它的规则很繁琐，需要标注的信息太多，而且很多信息明明可以从代码中直接抽取。而且维护注释也是需要一定的成本的，这本质上和直接维护文档是一样的。
## 1.3 研究意义
本工具使用元编程技术，对于参数的名称和类型，直接使用元编程技术从代码中抽取；对于参数的描述，使用注解和配置来描述。以这样的方式，不仅仅可以在编译时期自动生成 API 文档，而且维护成本也极低，只要维护配置文件和注解即可。而且本工具是直接抽取代码的信息，这比使用注释标注高明很多，它减少了 API 文档出错的风险。因为注释是不会被编译器检查的，即使你写错了编译器也不会报错，但是代码是会被编译器检查的，代码写错，编译自然不通过，程序自然也就运行不起来。
# 2. 需求分析与可行性分析
## 2.1 需求分析
在现代软件开发中，工程师经常会编写接口代码，但是在接口代码编写完成后，还需要手动的编写 API 文档，这会增加软件的维护成本以及软件产生 bug 的几率。因此需要一个可以自动生成 API 文档的工具，工程师可以按照工具制定的规则编写 API 接口，在代码编程完成后，可以自动的生成对应的 API 文档。这样既减少了软件的维护成本，也降低了软件因 API 文档错误而产生 bug 的几率。

这个工具最好可以以第三方扩展库的方式整合到项目工程中，这样既降低了项目的和 API 工具之间的耦合性，也增强了项目本身的可扩展性。
## 2.2 交互流程设计
* 接口代码编写工程师：工程师按照规则把接口代码编写完成时，工具会在编译时期抽取接口代码中的数据，在服务器运行时，配置相关信息，设置一个接口专门负责 API 文档的显示。然后在浏览器里面输入对应的路径，就可以看到自动生成的 API 文档。
* 接口调用工程师：根据链接查看文档，按照文档里面的接口说明，就可以调用需要的接口。
详细的交互流程如下图：
![交互流程图](/image/graduation/interactive.png)

## 2.3 可行性分析
### 2.3.1 市场可行性分析
在互联网飞速发展的当下，经常会存在人与人或者公司与公司之间协同合作开发软件的场景，因此 API 文档成了沟通交流的重要工具，但是现实中，工程师不仅仅需要编写接口代码，而且还需要手动的维护接口文档。因此急需一个 API 文档自动生成工具来帮助工程师减轻工作量，帮助公司减少软件维护成本。
### 2.3.2 技术可行性
在公司实习了几个月，对接口代码的开发模型已经了解的很清楚，对元编程技术已经初步掌握，为了更方便的实现以及在生产中应用此工具，决定基于实习公司是开发模型写一个基于 Play 框架的 API 文档自动生成工具。这样当本地开发测试通过后，可以在实习公司的生产线上部署此工具，可以更好的测试该工具的实际用途以及 bug 的反馈。
# 3. 系统设计

## 3.1 设计总体思路
### 3.1.1 Play-Swa 的设计
### 3.1.2 Play-swa-demo 的设计

## 3.2 后端模块设计思路
### 3.2.1 Scala
### 3.2.2 元编程
### 3.2.3 Scala 宏
### 3.2.4 SBT
### 3.2.5 Play 框架

## 3.3 前端模块设计思路
### 3.3.1 HTML
### 3.3.2 CSS
### 3.3.3 JS
### 3.3.4 Vue
### 3.3.5 Vue-resource
### 3.3.6 Vue-Router
### 3.3.7 eslint

# 4. 模块实现

## 4.1 开发环境的搭建和配置
### 4.1.1 搭建后端环境
### 4.1.2 搭建前端环境
### 4.1.3 Git 版本控制

## 4.2 后端实现
### 4.2.1 接口规则的制定
#### 4.2.1.1 配置规则
#### 4.2.1.2 注解规则
### 4.2.2 规则的解析
### 4.2.3 数据的整理和保存
### 4.2.4 路由的自动生成

## 4.2 前端实现
### 4.2.1 UI 设计
### 4.2.2 前端数据解析和显示

# 5. 测试并运行

## 5.1 后端单元测试
### 5.1.1 API 数据抽取测试
### 5.1.2 配置读取测试
### 5.1.3 注解读取测试
### 5.1.4 路由生成测试

## 5.2 前端交互测试

## 5.3 运行和展示
### 5.3.1 运行环境配置
### 5.3.2 效果图展示

# 6. 总结与展望

# 7. 致谢

# 8 参考文献

# 9 附录
